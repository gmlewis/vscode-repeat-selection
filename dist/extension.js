var c=require("vscode"),h=1e7,x=g=>{console.log('Congratulations, your extension "repeat-selection" is now active!');let u=c.commands.registerCommand("repeat-selection.repeatSelection",()=>{let o={placeHolder:"default: 1",prompt:"Input the number of times to paste selected text."},i=c.window.showInputBox(o);if(!i){console.log(`Aborting: input='${i}'`);return}i.then(l=>{let p=parseInt(l,10)||1,r=[],t=c.window.activeTextEditor;t.edit(n=>{t.selections.forEach(e=>{console.log(`GML: selection=${JSON.stringify(e)}`);let s=t.document.getText(new c.Range(e.start,e.end));if(console.log(`text.length=${s.length}: text='${s}'`),s.length*p>h){let f="Final text length exceeds max of "+h.toString()+"on line "+e.start.line+".";c.window.showErrorMessage(f);return}let w=d({numCopies:p,text:s,selection:e,newPositions:r});n.replace(e,w)})});let a=[];r.forEach(n=>{let e=new c.Position(n[0],n[1]);console.log(`GML: [${n[0]},${n[1]}] => cursorPosition=${JSON.stringify(e)}`);let s=new c.Selection(e,e);console.log(`GML: newSelection=${JSON.stringify(s)}`),a.push(s)}),t.selection=a[0],t.selections=a})});g.subscriptions.push(u)},d=({numCopies:g,text:u,selection:o,newPositions:i})=>{let l=Math.abs(o.end.line-o.start.line),p=l===0?Math.abs(o.end.character-o.start.character):0,r="";for(let t=0;t<g;t++){r+=u;let a=o.active.line+l*t,n=o.active.character+p*t;i.push([a,n])}return r},m=()=>{};module.exports={activate:x,deactivate:m,processSelection:d};
